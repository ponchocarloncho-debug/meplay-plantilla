<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Title - Video Site</title>
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #141414;
      color: white;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    
    .video-layout {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 2rem;
    }
    
    .video-main {
      min-width: 0;
    }
    
    .video-player {
      position: relative;
      padding-top: 56.25%;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 1.5rem;
    }
    
    .video-player iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .video-info {
      background: #2a2a2a;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }
    
    .video-title {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      color: white;
    }
    
    .video-meta {
      display: flex;
      gap: 1rem;
      color: #888;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    
    .favorite-main-btn {
      background: #e50914;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .favorite-main-btn:hover {
      background: #c40812;
      transform: translateY(-2px);
    }
    
    .favorite-main-btn.favorited {
      background: #2a2a2a;
      border: 2px solid #e50914;
    }
    
    .video-description {
      color: #ccc;
      line-height: 1.8;
    }
    
    .video-sidebar {
      position: sticky;
      top: 100px;
      height: fit-content;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
    }
    
    /* Widget styling */
    .widget-section {
      background: #1a1a1a;
      padding: 1.5rem;
      border-radius: 8px;
    }
    
    .widget-title {
      color: white;
      font-size: 1.3rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e50914;
    }
    
    .widget-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
      .video-layout {
        grid-template-columns: 1fr;
      }
      
      .video-sidebar {
        position: static;
        max-height: none;
      }
      
      .widget-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .video-title {
        font-size: 1.4rem;
      }
      
      .video-meta {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
    
    /* Scrollbar styling for sidebar */
    .video-sidebar::-webkit-scrollbar {
      width: 8px;
    }
    
    .video-sidebar::-webkit-scrollbar-track {
      background: #1a1a1a;
      border-radius: 4px;
    }
    
    .video-sidebar::-webkit-scrollbar-thumb {
      background: #3a3a3a;
      border-radius: 4px;
    }
    
    .video-sidebar::-webkit-scrollbar-thumb:hover {
      background: #4a4a4a;
    }
  </style>
</head>
<body>
  <!-- Template header will be injected here by template.js -->
  
  <main>
    <div class="container">
      <div class="video-layout">
        <!-- Main Video Column -->
        <div class="video-main">
          <!-- Video Player -->
          <div class="video-player">
            <iframe 
              src="VIDEO_EMBED_URL_HERE" 
              allowfullscreen 
              allow="autoplay; encrypted-media; picture-in-picture"
            ></iframe>
          </div>
          
          <!-- Video Info -->
          <div class="video-info">
            <h1 class="video-title">Video Title Here</h1>
            
            <div class="video-meta">
              <span>üìÖ 2026-01-23</span>
              <span>üëÅÔ∏è Views</span>
            </div>
            
            <button 
              id="favorite-main" 
              class="favorite-main-btn"
              onclick="toggleMainFavorite()"
            >
              <span id="favorite-icon">‚òÜ</span>
              <span id="favorite-text">Add to Favorites</span>
            </button>
            
            <div class="video-description" style="margin-top: 1.5rem;">
              <p>Video description goes here...</p>
            </div>
          </div>
        </div>
        
        <!-- Sidebar with Random Videos Widget -->
        <aside class="video-sidebar">
          <div id="video-widget"></div>
        </aside>
      </div>
    </div>
  </main>
  
  <!-- Template footer will be injected here by template.js -->
  
  <!-- Load template first -->
  <script src="../template.js"></script>
  
  <!-- Load search functionality -->
  <script src="../search.js"></script>
  
  <!-- Load widget with ONLY random videos -->
  <script src="../widget.js"></script>
  
  <!-- Video page script -->
  <script>
    // Get current video URL
    const currentVideoUrl = window.location.pathname.split('/').slice(-2).join('/');
    
    // Toggle favorite for main button
    function toggleMainFavorite() {
      const button = document.getElementById('favorite-main');
      const icon = document.getElementById('favorite-icon');
      const text = document.getElementById('favorite-text');
      
      // Get video title from page
      const videoTitle = document.querySelector('.video-title').textContent;
      
      let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
      const index = favorites.indexOf(currentVideoUrl);
      
      if (index > -1) {
        favorites.splice(index, 1);
        icon.textContent = '‚òÜ';
        text.textContent = 'Add to Favorites';
        button.classList.remove('favorited');
        showToast(`"${videoTitle}" removed from favorites`, 'removed');
      } else {
        favorites.push(currentVideoUrl);
        icon.textContent = '‚òÖ';
        text.textContent = 'Remove from Favorites';
        button.classList.add('favorited');
        showToast(`"${videoTitle}" added to favorites`, 'added');
      }
      
      localStorage.setItem('favorites', JSON.stringify(favorites));
    }
    
    // Show toast notification
    function showToast(message, type) {
      const existingToasts = document.querySelectorAll('.toast');
      existingToasts.forEach(toast => toast.remove());
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <span>${type === 'added' ? '‚úì' : '‚úï'}</span>
        <span>${message}</span>
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('removing');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
    
    // Check if current video is favorited and update button
    function updateFavoriteButton() {
      const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
      const button = document.getElementById('favorite-main');
      const icon = document.getElementById('favorite-icon');
      const text = document.getElementById('favorite-text');
      
      if (favorites.includes(currentVideoUrl)) {
        icon.textContent = '‚òÖ';
        text.textContent = 'Remove from Favorites';
        button.classList.add('favorited');
      } else {
        icon.textContent = '‚òÜ';
        text.textContent = 'Add to Favorites';
        button.classList.remove('favorited');
      }
    }
    
    // Initialize
    updateFavoriteButton();
    
    // Update button when storage changes
    window.addEventListener('storage', updateFavoriteButton);
  </script>
  
  <!-- 
  INSTRUCTIONS FOR CREATING NEW VIDEO PAGES:
  
  1. Copy this file to /videos/ folder with the video's URL name (e.g., diego-yoga.html)
  2. Update the <title> tag with the video title
  3. Replace "VIDEO_EMBED_URL_HERE" with the actual embed URL from videodata.json
  4. Update the video title in <h1 class="video-title">
  5. Update the date in the meta section
  6. Add video description
  7. The widget will automatically show random videos excluding the current one
  -->
</body>
</html>
